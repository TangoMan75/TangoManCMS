{% extends 'base.html.twig' %}

{% block title %}{{ parent() }} | Poster un message{% endblock %}

{% block head %}
{{ parent() }}
<script src="http://cdn.tinymce.com/4/tinymce.min.js"></script>
<script>tinymce.init({ selector:'textarea' });</script>
{% endblock %}

{% block stylesheets %}
{{ parent() }}
{% endblock %}

{% block body %}
<section id="posts">
    {% for post in list_post %}
    <article class="post panel panel-primary">
        <header class="panel-heading"><h3 class="text-center">{{ post.title }}</h3></header>
        <div class="panel-body">
            <p>{{ post.content|nl2br }}</p>
        </div>
        <footer class="panel-footer">Posté le: {{ post.datetime|date('d/m/Y') }} par: {{ post.author }}</footer>
    </article>
    {% else %}
    <article class="panel panel-primary">
        <header class="panel-heading"><h3 class="text-center">Aucun messages</h3></header>
        <div class="panel-body">
            <p>Il n'y a aucun message à afficher</p>
        </div>
        <footer class="panel-footer">Posté le: {{ "now"|date('d/m/Y') }} par: livredor.dev </footer>
    </article>
    {% endfor %}
</section>

<div id="post-form" class="jumbotron">
    <h2>Publier un message</h2>
    {{ form_start(form_post) }}
    {{ form_widget(form_post) }}
    <input type="submit" class="btn btn-primary center-block" value="Publier"/>
    {{ form_end(form_post) }}
</div>
{% endblock %}
